<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.itwillbs.with_me.mapper.CreatorFundingMapper">
<!-- 작성중인 프로젝트 목록 조회 - SELECT -->
<select id="selectProjectList" resultType="project">
	SELECT *
	FROM project_info
	WHERE creator_idx = (
		SELECT creator_idx
		FROM creator_info
		WHERE creator_email = #{id})
	AND project_status = '작성중'
	ORDER BY project_submit_date desc	-- 최근에 수정(제출) 한 순서
	Limit 1								-- 그 중에 첫번째 행
</select>

<!-- 상위공통코드 FUND 인 컬럼(카테고리) 조회 - SELECT -->
<select id="selectCategory" resultType='commonCode'>
	SELECT *
	FROM common_code
	WHERE common_code_top = 'FUND'
</select>

<!-- 세부 카테고리 조회 - SELECT -->
<!-- 파라미터가 common_code_name 형태이므로 서브쿼리에서 common_code 찾아서 조회 -->
<select id="selectCategoryDetail" resultType='commonCode'>
	SELECT *
	FROM common_code
	WHERE common_code_top = (
		SELECT common_code
		FROM common_code
		WHERE common_code_name = #{project_category}
		AND common_code_top = 'FUND'
	)
</select>



</mapper>